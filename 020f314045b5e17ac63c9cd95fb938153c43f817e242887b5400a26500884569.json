{"ast":null,"code":"var _jsxFileName = \"D:\\\\bank-calculator-app\\\\client\\\\src\\\\components\\\\AuthForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthForm = ({\n  setAuthToken\n}) => {\n  _s();\n  const [isLogin, setIsLogin] = useState(true); // true — авторизация, false — регистрация\n  const [formData, setFormData] = useState({\n    username: '',\n    password: ''\n  });\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const endpoint = isLogin ? '/api/auth/login' : '/api/auth/register';\n    try {\n      const response = await axios.post(`http://localhost:5000${endpoint}`, formData);\n      const data = response.data;\n      if (isLogin) {\n        // Сохраняем токен только при авторизации\n        sessionStorage.setItem('token', data.token);\n        setAuthToken(data.token); // Уведомляем родительский компонент о сохранении токена\n        alert('Вы успешно вошли!');\n      } else {\n        alert('Регистрация прошла успешно!');\n        setIsLogin(true); // Переключаемся на авторизацию после регистрации\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(error.message);\n      alert(`Ошибка: ${((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Не удалось выполнить запрос'}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: containerStyle,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: isLogin ? 'Авторизация' : 'Регистрация'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      style: formStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",\n        value: formData.username,\n        onChange: handleInputChange,\n        required: true,\n        style: inputStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n        value: formData.password,\n        onChange: handleInputChange,\n        required: true,\n        style: inputStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: buttonStyle,\n        children: isLogin ? 'Войти' : 'Зарегистрироваться'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: toggleStyle,\n      children: [isLogin ? 'Нет аккаунта?' : 'Уже есть аккаунт?', /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsLogin(!isLogin),\n        style: linkStyle,\n        children: isLogin ? 'Зарегистрируйтесь' : 'Войдите'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n};\n\n// Стили для компонента\n_s(AuthForm, \"09vEyUf8q3AXa6jm+xfktfcZS/o=\");\n_c = AuthForm;\nconst containerStyle = {\n  maxWidth: '400px',\n  margin: '50px auto',\n  padding: '20px',\n  border: '1px solid #ccc',\n  borderRadius: '8px',\n  textAlign: 'center',\n  boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)'\n};\nconst formStyle = {\n  display: 'flex',\n  flexDirection: 'column',\n  gap: '15px'\n};\nconst inputStyle = {\n  padding: '10px',\n  fontSize: '16px',\n  border: '1px solid #ccc',\n  borderRadius: '4px'\n};\nconst buttonStyle = {\n  padding: '10px',\n  fontSize: '16px',\n  color: '#fff',\n  backgroundColor: '#007BFF',\n  border: 'none',\n  borderRadius: '4px',\n  cursor: 'pointer'\n};\nconst toggleStyle = {\n  marginTop: '10px'\n};\nconst linkStyle = {\n  marginLeft: '5px',\n  color: '#007BFF',\n  background: 'none',\n  border: 'none',\n  cursor: 'pointer',\n  textDecoration: 'underline'\n};\nexport default AuthForm;\nvar _c;\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","AuthForm","setAuthToken","_s","isLogin","setIsLogin","formData","setFormData","username","password","handleInputChange","e","name","value","target","handleSubmit","preventDefault","endpoint","response","post","data","sessionStorage","setItem","token","alert","error","_error$response","_error$response$data","console","message","style","containerStyle","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","formStyle","type","placeholder","onChange","required","inputStyle","buttonStyle","toggleStyle","onClick","linkStyle","_c","maxWidth","margin","padding","border","borderRadius","textAlign","boxShadow","display","flexDirection","gap","fontSize","color","backgroundColor","cursor","marginTop","marginLeft","background","textDecoration","$RefreshReg$"],"sources":["D:/bank-calculator-app/client/src/components/AuthForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst AuthForm = ({ setAuthToken }) => {\r\n  const [isLogin, setIsLogin] = useState(true); // true — авторизация, false — регистрация\r\n  const [formData, setFormData] = useState({ username: '', password: '' });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const endpoint = isLogin ? '/api/auth/login' : '/api/auth/register';\r\n\r\n    try {\r\n      const response = await axios.post(`http://localhost:5000${endpoint}`, formData);\r\n      const data = response.data;\r\n\r\n      if (isLogin) {\r\n        // Сохраняем токен только при авторизации\r\n        sessionStorage.setItem('token', data.token);\r\n        setAuthToken(data.token); // Уведомляем родительский компонент о сохранении токена\r\n        alert('Вы успешно вошли!');\r\n      } else {\r\n        alert('Регистрация прошла успешно!');\r\n        setIsLogin(true); // Переключаемся на авторизацию после регистрации\r\n      }\r\n    } catch (error) {\r\n      console.error(error.message);\r\n      alert(`Ошибка: ${error.response?.data?.message || 'Не удалось выполнить запрос'}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={containerStyle}>\r\n      <h2>{isLogin ? 'Авторизация' : 'Регистрация'}</h2>\r\n      <form onSubmit={handleSubmit} style={formStyle}>\r\n        <input\r\n          type=\"text\"\r\n          name=\"username\"\r\n          placeholder=\"Имя пользователя\"\r\n          value={formData.username}\r\n          onChange={handleInputChange}\r\n          required\r\n          style={inputStyle}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Пароль\"\r\n          value={formData.password}\r\n          onChange={handleInputChange}\r\n          required\r\n          style={inputStyle}\r\n        />\r\n        <button type=\"submit\" style={buttonStyle}>\r\n          {isLogin ? 'Войти' : 'Зарегистрироваться'}\r\n        </button>\r\n      </form>\r\n      <p style={toggleStyle}>\r\n        {isLogin ? 'Нет аккаунта?' : 'Уже есть аккаунт?'}\r\n        <button onClick={() => setIsLogin(!isLogin)} style={linkStyle}>\r\n          {isLogin ? 'Зарегистрируйтесь' : 'Войдите'}\r\n        </button>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Стили для компонента\r\nconst containerStyle = {\r\n  maxWidth: '400px',\r\n  margin: '50px auto',\r\n  padding: '20px',\r\n  border: '1px solid #ccc',\r\n  borderRadius: '8px',\r\n  textAlign: 'center',\r\n  boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\r\n};\r\n\r\nconst formStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  gap: '15px',\r\n};\r\n\r\nconst inputStyle = {\r\n  padding: '10px',\r\n  fontSize: '16px',\r\n  border: '1px solid #ccc',\r\n  borderRadius: '4px',\r\n};\r\n\r\nconst buttonStyle = {\r\n  padding: '10px',\r\n  fontSize: '16px',\r\n  color: '#fff',\r\n  backgroundColor: '#007BFF',\r\n  border: 'none',\r\n  borderRadius: '4px',\r\n  cursor: 'pointer',\r\n};\r\n\r\nconst toggleStyle = {\r\n  marginTop: '10px',\r\n};\r\n\r\nconst linkStyle = {\r\n  marginLeft: '5px',\r\n  color: '#007BFF',\r\n  background: 'none',\r\n  border: 'none',\r\n  cursor: 'pointer',\r\n  textDecoration: 'underline',\r\n};\r\n\r\nexport default AuthForm;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,QAAQ,GAAGA,CAAC;EAAEC;AAAa,CAAC,KAAK;EAAAC,EAAA;EACrC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;EAC9C,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC;IAAEW,QAAQ,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAG,CAAC,CAAC;EAExE,MAAMC,iBAAiB,GAAIC,CAAC,IAAK;IAC/B,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IAChCP,WAAW,CAAC;MAAE,GAAGD,QAAQ;MAAE,CAACM,IAAI,GAAGC;IAAM,CAAC,CAAC;EAC7C,CAAC;EAED,MAAME,YAAY,GAAG,MAAOJ,CAAC,IAAK;IAChCA,CAAC,CAACK,cAAc,CAAC,CAAC;IAClB,MAAMC,QAAQ,GAAGb,OAAO,GAAG,iBAAiB,GAAG,oBAAoB;IAEnE,IAAI;MACF,MAAMc,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAAC,wBAAwBF,QAAQ,EAAE,EAAEX,QAAQ,CAAC;MAC/E,MAAMc,IAAI,GAAGF,QAAQ,CAACE,IAAI;MAE1B,IAAIhB,OAAO,EAAE;QACX;QACAiB,cAAc,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACG,KAAK,CAAC;QAC3CrB,YAAY,CAACkB,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC;QAC1BC,KAAK,CAAC,mBAAmB,CAAC;MAC5B,CAAC,MAAM;QACLA,KAAK,CAAC,6BAA6B,CAAC;QACpCnB,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;MACpB;IACF,CAAC,CAAC,OAAOoB,KAAK,EAAE;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACdC,OAAO,CAACH,KAAK,CAACA,KAAK,CAACI,OAAO,CAAC;MAC5BL,KAAK,CAAC,WAAW,EAAAE,eAAA,GAAAD,KAAK,CAACP,QAAQ,cAAAQ,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBN,IAAI,cAAAO,oBAAA,uBAApBA,oBAAA,CAAsBE,OAAO,KAAI,6BAA6B,EAAE,CAAC;IACpF;EACF,CAAC;EAED,oBACE7B,OAAA;IAAK8B,KAAK,EAAEC,cAAe;IAAAC,QAAA,gBACzBhC,OAAA;MAAAgC,QAAA,EAAK5B,OAAO,GAAG,aAAa,GAAG;IAAa;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAClDpC,OAAA;MAAMqC,QAAQ,EAAEtB,YAAa;MAACe,KAAK,EAAEQ,SAAU;MAAAN,QAAA,gBAC7ChC,OAAA;QACEuC,IAAI,EAAC,MAAM;QACX3B,IAAI,EAAC,UAAU;QACf4B,WAAW,EAAC,6FAAkB;QAC9B3B,KAAK,EAAEP,QAAQ,CAACE,QAAS;QACzBiC,QAAQ,EAAE/B,iBAAkB;QAC5BgC,QAAQ;QACRZ,KAAK,EAAEa;MAAW;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB,CAAC,eACFpC,OAAA;QACEuC,IAAI,EAAC,UAAU;QACf3B,IAAI,EAAC,UAAU;QACf4B,WAAW,EAAC,sCAAQ;QACpB3B,KAAK,EAAEP,QAAQ,CAACG,QAAS;QACzBgC,QAAQ,EAAE/B,iBAAkB;QAC5BgC,QAAQ;QACRZ,KAAK,EAAEa;MAAW;QAAAV,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB,CAAC,eACFpC,OAAA;QAAQuC,IAAI,EAAC,QAAQ;QAACT,KAAK,EAAEc,WAAY;QAAAZ,QAAA,EACtC5B,OAAO,GAAG,OAAO,GAAG;MAAoB;QAAA6B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eACPpC,OAAA;MAAG8B,KAAK,EAAEe,WAAY;MAAAb,QAAA,GACnB5B,OAAO,GAAG,eAAe,GAAG,mBAAmB,eAChDJ,OAAA;QAAQ8C,OAAO,EAAEA,CAAA,KAAMzC,UAAU,CAAC,CAACD,OAAO,CAAE;QAAC0B,KAAK,EAAEiB,SAAU;QAAAf,QAAA,EAC3D5B,OAAO,GAAG,mBAAmB,GAAG;MAAS;QAAA6B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACD,CAAC;AAEV,CAAC;;AAED;AAAAjC,EAAA,CApEMF,QAAQ;AAAA+C,EAAA,GAAR/C,QAAQ;AAqEd,MAAM8B,cAAc,GAAG;EACrBkB,QAAQ,EAAE,OAAO;EACjBC,MAAM,EAAE,WAAW;EACnBC,OAAO,EAAE,MAAM;EACfC,MAAM,EAAE,gBAAgB;EACxBC,YAAY,EAAE,KAAK;EACnBC,SAAS,EAAE,QAAQ;EACnBC,SAAS,EAAE;AACb,CAAC;AAED,MAAMjB,SAAS,GAAG;EAChBkB,OAAO,EAAE,MAAM;EACfC,aAAa,EAAE,QAAQ;EACvBC,GAAG,EAAE;AACP,CAAC;AAED,MAAMf,UAAU,GAAG;EACjBQ,OAAO,EAAE,MAAM;EACfQ,QAAQ,EAAE,MAAM;EAChBP,MAAM,EAAE,gBAAgB;EACxBC,YAAY,EAAE;AAChB,CAAC;AAED,MAAMT,WAAW,GAAG;EAClBO,OAAO,EAAE,MAAM;EACfQ,QAAQ,EAAE,MAAM;EAChBC,KAAK,EAAE,MAAM;EACbC,eAAe,EAAE,SAAS;EAC1BT,MAAM,EAAE,MAAM;EACdC,YAAY,EAAE,KAAK;EACnBS,MAAM,EAAE;AACV,CAAC;AAED,MAAMjB,WAAW,GAAG;EAClBkB,SAAS,EAAE;AACb,CAAC;AAED,MAAMhB,SAAS,GAAG;EAChBiB,UAAU,EAAE,KAAK;EACjBJ,KAAK,EAAE,SAAS;EAChBK,UAAU,EAAE,MAAM;EAClBb,MAAM,EAAE,MAAM;EACdU,MAAM,EAAE,SAAS;EACjBI,cAAc,EAAE;AAClB,CAAC;AAED,eAAejE,QAAQ;AAAC,IAAA+C,EAAA;AAAAmB,YAAA,CAAAnB,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}